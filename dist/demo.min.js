var SurveyBuilder=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function s(){return Object.create(null)}function l(t){t.forEach(o)}function i(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t){return null==t?"":t}const r="undefined"!=typeof window;let a=r?()=>window.performance.now():()=>Date.now(),p=r?t=>requestAnimationFrame(t):t;const f=new Set;function d(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&p(d)}function h(t,e){t.appendChild(e)}function m(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function g(t){const e=$("style");return function(t,e){h(t.head||t,e)}(m(t),e),e}function w(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function x(){return b(" ")}function v(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function q(t){return function(e){return e.preventDefault(),t.call(this,e)}}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t){return""===t?null:+t}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function S(t,e){t.value=null==e?"":e}function C(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function L(t,e,n){t.classList[n?"add":"remove"](e)}const E=new Set;let N,I=0;function R(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),s=n.length-o.length;s&&(t.style.animation=o.join(", "),I-=s,I||p((()=>{I||(E.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),E.clear())})))}function B(n,o,s,l){if(!o)return t;const i=n.getBoundingClientRect();if(o.left===i.left&&o.right===i.right&&o.top===i.top&&o.bottom===i.bottom)return t;const{delay:u=0,duration:c=300,easing:r=e,start:h=a()+u,end:w=h+c,tick:y=t,css:$}=s(n,{from:o,to:i},l);let b,x=!0,v=!1;function q(){$&&R(n,b),x=!1}return function(t){let e;0===f.size&&p(d),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(!v&&t>=h&&(v=!0),v&&t>=w&&(y(1,0),q()),!x)return!1;if(v){const e=0+1*r((t-h)/c);y(e,1-e)}return!0})),$&&(b=function(t,e,n,o,s,l,i,u=0){const c=16.666/o;let r="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*l(t);r+=100*t+`%{${i(o,1-o)}}\n`}const a=r+`100% {${i(n,1-n)}}\n}`,p=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${u}`,f=m(t);E.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=g(t).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[p]||(h[p]=!0,d.insertRule(`@keyframes ${p} ${a}`,d.cssRules.length));const w=t.style.animation||"";return t.style.animation=`${w?`${w}, `:""}${p} ${o}ms linear ${s}ms 1 both`,I+=1,p}(n,0,1,c,u,r,$)),u||(v=!0),y(0,1),q}function M(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:o}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),s="none"===o.transform?"":o.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,s)}}function A(t){N=t}const j=[],O=[],D=[],P=[],V=Promise.resolve();let z=!1;function U(t){D.push(t)}function F(t){P.push(t)}let H=!1;const J=new Set;function Q(){if(!H){H=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];A(e),Y(e.$$)}for(A(null),j.length=0;O.length;)O.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];J.has(e)||(J.add(e),e())}D.length=0}while(j.length);for(;P.length;)P.pop()();z=!1,H=!1,J.clear()}}function Y(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const G=new Set;let K;function W(){K={r:0,c:[],p:K}}function X(){K.r||l(K.c),K=K.p}function Z(t,e){t&&t.i&&(G.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(G.has(t))return;G.add(t),K.c.push((()=>{G.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function et(t,e){t.f(),function(t,e){tt(t,1,1,(()=>{e.delete(t.key)}))}(t,e)}function nt(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function ot(t){t&&t.c()}function st(t,e,n,s){const{fragment:u,on_mount:c,on_destroy:r,after_update:a}=t.$$;u&&u.m(e,n),s||U((()=>{const e=c.map(o).filter(i);r?r.push(...e):l(e),t.$$.on_mount=[]})),a.forEach(U)}function lt(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(j.push(t),z||(z=!0,V.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ut(e,n,o,i,u,c,r,a=[-1]){const p=N;A(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:s(),dirty:a,skip_bound:!1,root:n.target||p.$$.root};r&&r(f.root);let d=!1;if(f.ctx=o?o(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&u(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),d&&it(e,t)),n})):[],f.update(),d=!0,l(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(y)}else f.fragment&&f.fragment.c();n.intro&&Z(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),Q()}A(p)}class ct{$destroy(){lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var rt;function at(t,e,n){const o=t.slice();return o[7]=e[n][0],o[8]=e[n][1],o}function pt(e){let n,o,s,l=e[8]+"";return{c(){n=$("option"),o=b(l),n.__value=s=e[7],n.value=n.__value},m(t,e){w(t,n,e),h(n,o)},p:t,d(t){t&&y(n)}}}function ft(e){let n,o,s,i,u,c,r,a,p,f,d,m,g=e[3],k=[];for(let t=0;t<g.length;t+=1)k[t]=pt(at(e,g,t));return{c(){n=$("main"),o=$("div"),s=$("label"),i=b("Type:"),c=x(),r=$("select");for(let t=0;t<k.length;t+=1)k[t].c();p=x(),f=$("div"),f.innerHTML='<svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>',_(s,"for",u="qtype-"+e[1]),_(s,"class","label-inline svelte-qomrjm"),_(r,"id",a="qtype-"+e[1]),_(r,"class","dropdown svelte-qomrjm"),void 0===e[0]&&U((()=>e[6].call(r))),_(f,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"),_(o,"class","relative svelte-qomrjm"),L(o,"showLabels",e[2])},m(t,l){w(t,n,l),h(n,o),h(o,s),h(s,i),h(o,c),h(o,r);for(let t=0;t<k.length;t+=1)k[t].m(r,null);C(r,e[0]),h(o,p),h(o,f),d||(m=[v(r,"change",e[6]),v(r,"input",q(e[4]))],d=!0)},p(t,[e]){if(2&e&&u!==(u="qtype-"+t[1])&&_(s,"for",u),8&e){let n;for(g=t[3],n=0;n<g.length;n+=1){const o=at(t,g,n);k[n]?k[n].p(o,e):(k[n]=pt(o),k[n].c(),k[n].m(r,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=g.length}2&e&&a!==(a="qtype-"+t[1])&&_(r,"id",a),9&e&&C(r,t[0]),4&e&&L(o,"showLabels",t[2])},i:t,o:t,d(t){t&&y(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(k,t),d=!1,l(m)}}}function dt(t,e,n){let{questionType:o}=e,{id:s="qt"}=e,{showLabels:l=!0}=e;const i=[[rt.TextInput,"User input"],[rt.SingleSelect,"Single option"],[rt.MultipleSelect,"Multiple options"],[rt.StarsRating,"Rating"]];let{onChange:u}=e;return t.$$set=t=>{"questionType"in t&&n(0,o=t.questionType),"id"in t&&n(1,s=t.id),"showLabels"in t&&n(2,l=t.showLabels),"onChange"in t&&n(5,u=t.onChange)},[o,s,l,i,t=>u(t.target.value),u,function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,o),n(3,i)}]}!function(t){t.TextInput="input",t.TextValue="text",t.SingleSelect="single",t.MultipleSelect="multiple",t.StarsRating="rating"}(rt||(rt={}));class ht extends ct{constructor(t){super(),ut(this,t,dt,ft,u,{questionType:0,id:1,showLabels:2,onChange:5})}}function mt(t){const e=t-1;return e*e*e+1}function gt(t,{from:e,to:n},o={}){const s=getComputedStyle(t),l="none"===s.transform?"":s.transform,[u,c]=s.transformOrigin.split(" ").map(parseFloat),r=e.left+e.width*u/n.width-(n.left+u),a=e.top+e.height*c/n.height-(n.top+c),{delay:p=0,duration:f=(t=>120*Math.sqrt(t)),easing:d=mt}=o;return{delay:p,duration:i(f)?f(Math.sqrt(r*r+a*a)):f,easing:d,css:(t,o)=>{const s=o*r,i=o*a,u=t+o*e.width/n.width,c=t+o*e.height/n.height;return`transform: ${l} translate(${s}px, ${i}px) scale(${u}, ${c});`}}}const wt=(t="q")=>`${t}-${Math.random().toString(32).substr(2)}`;function yt(t,e,n){const o=t.slice();return o[26]=e[n],o[27]=e,o[28]=n,o}function $t(t){let e,n,o;function s(){return t[13](t[28])}return{c(){e=$("button"),e.textContent="↓"},m(t,l){w(t,e,l),n||(o=v(e,"click",q(s)),n=!0)},p(e,n){t=e},d(t){t&&y(e),n=!1,o()}}}function bt(t){let e,n,o;function s(){return t[14](t[28])}return{c(){e=$("button"),e.textContent="↑"},m(t,l){w(t,e,l),n||(o=v(e,"click",q(s)),n=!0)},p(e,n){t=e},d(t){t&&y(e),n=!1,o()}}}function xt(t){let e,n,o,s,i;function u(){return t[16](t[28])}return{c(){e=$("button"),e.textContent="× Yes, delete",n=x(),o=$("button"),o.textContent="Cancel",_(e,"class","danger"),_(o,"class","warning")},m(l,c){w(l,e,c),w(l,n,c),w(l,o,c),s||(i=[v(e,"click",q(u)),v(o,"click",q(t[17]))],s=!0)},p(e,n){t=e},d(t){t&&y(e),t&&y(n),t&&y(o),s=!1,l(i)}}}function vt(t){let e,n,o;function s(){return t[15](t[28])}return{c(){e=$("button"),e.textContent="× Delete",_(e,"class","warning")},m(t,l){w(t,e,l),n||(o=v(e,"click",q(s)),n=!0)},p(e,n){t=e},d(t){t&&y(e),n=!1,o()}}}function qt(t){let e,n,o,s,l,i,u,c,r,a,p;function f(...e){return t[18](t[28],...e)}function d(){t[19].call(l,t[27],t[28])}n=new ht({props:{id:t[26].id,questionType:t[26].type,onChange:f,showLabels:t[1]}});let m=t[3]&&_t(t),g=t[26].type===rt.StarsRating&&kt(t);return{c(){e=$("div"),ot(n.$$.fragment),o=x(),s=$("label"),l=$("input"),i=b("\n            Required"),u=x(),m&&m.c(),c=x(),g&&g.c(),_(l,"type","checkbox"),_(s,"class","mx-4 whitespace-nowrap"),_(e,"class","flex w-3/4 items-center ml-8 py-2")},m(f,y){w(f,e,y),st(n,e,null),h(e,o),h(e,s),h(s,l),l.checked=t[26].required,h(s,i),h(e,u),m&&m.m(e,null),h(e,c),g&&g.m(e,null),r=!0,a||(p=v(l,"change",d),a=!0)},p(o,s){t=o;const i={};1&s&&(i.id=t[26].id),1&s&&(i.questionType=t[26].type),1&s&&(i.onChange=f),2&s&&(i.showLabels=t[1]),n.$set(i),1&s&&(l.checked=t[26].required),t[3]?m?m.p(t,s):(m=_t(t),m.c(),m.m(e,c)):m&&(m.d(1),m=null),t[26].type===rt.StarsRating?g?g.p(t,s):(g=kt(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(t){r||(Z(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&y(e),lt(n),m&&m.d(),g&&g.d(),a=!1,p()}}}function _t(t){let e,n,o,s,l,i,u,c,r;function a(){t[20].call(i,t[27],t[28])}return{c(){e=$("div"),n=$("label"),o=b("Name:"),l=x(),i=$("input"),_(n,"class","label-inline svelte-9w4mm4"),_(n,"for",s="name-"+t[26].id),_(i,"id",u="name-"+t[26].id),_(i,"class","w-40 lg:w-64 px-4 svelte-9w4mm4"),_(i,"type","text"),_(i,"placeholder","inputName"),_(e,"class","flex-auto relative mr-4")},m(s,u){w(s,e,u),h(e,n),h(n,o),h(e,l),h(e,i),S(i,t[26].name),c||(r=v(i,"input",a),c=!0)},p(e,o){t=e,1&o&&s!==(s="name-"+t[26].id)&&_(n,"for",s),1&o&&u!==(u="name-"+t[26].id)&&_(i,"id",u),1&o&&i.value!==t[26].name&&S(i,t[26].name)},d(t){t&&y(e),c=!1,r()}}}function kt(t){let e,n,o,s,l,i,u,c,r;function a(){t[21].call(i,t[27],t[28])}return{c(){e=$("div"),n=$("label"),o=b("Max:"),l=x(),i=$("input"),_(n,"class","label-inline svelte-9w4mm4"),_(n,"for",s="opts-"+t[26].id),_(i,"id",u="opts-"+t[26].id),_(i,"class","w-24 lg:w-32 svelte-9w4mm4"),_(i,"type","number"),_(i,"placeholder","5"),_(e,"class","relative flex-auto")},m(s,u){w(s,e,u),h(e,n),h(n,o),h(e,l),h(e,i),S(i,t[26].options),c||(r=v(i,"input",a),c=!0)},p(e,o){t=e,1&o&&s!==(s="opts-"+t[26].id)&&_(n,"for",s),1&o&&u!==(u="opts-"+t[26].id)&&_(i,"id",u),1&o&&k(i.value)!==t[26].options&&S(i,t[26].options)},d(t){t&&y(e),c=!1,r()}}}function Tt(t){let e,n,o=t[26].type!==rt.StarsRating&&t[26].type!==rt.TextInput&&St(t);return{c(){e=$("div"),o&&o.c(),_(e,"class","ml-8 w-3/4")},m(t,s){w(t,e,s),o&&o.m(e,null),n=!0},p(t,n){t[26].type!==rt.StarsRating&&t[26].type!==rt.TextInput?o?(o.p(t,n),1&n&&Z(o,1)):(o=St(t),o.c(),Z(o,1),o.m(e,null)):o&&(W(),tt(o,1,1,(()=>{o=null})),X())},i(t){n||(Z(o),n=!0)},o(t){tt(o),n=!1},d(t){t&&y(e),o&&o.d()}}}function St(t){let e,n,o,s,l,i,u,c,r;function a(e){t[22](e,t[26])}function p(e){t[23](e,t[26])}function f(e){t[24](e)}let d={};function h(){return t[25](t[28])}return void 0!==t[26].answers&&(d.questions=t[26].answers),void 0!==t[26].type&&(d.parentType=t[26].type),void 0!==t[1]&&(d.showLabels=t[1]),e=new It({props:d}),O.push((()=>nt(e,"questions",a))),O.push((()=>nt(e,"parentType",p))),O.push((()=>nt(e,"showLabels",f))),{c(){ot(e.$$.fragment),l=x(),i=$("button"),i.textContent="+ Answer",_(i,"class","secondary w-full")},m(t,n){st(e,t,n),w(t,l,n),w(t,i,n),u=!0,c||(r=v(i,"click",q(h)),c=!0)},p(l,i){t=l;const u={};!n&&1&i&&(n=!0,u.questions=t[26].answers,F((()=>n=!1))),!o&&1&i&&(o=!0,u.parentType=t[26].type,F((()=>o=!1))),!s&&2&i&&(s=!0,u.showLabels=t[1],F((()=>s=!1))),e.$set(u)},i(t){u||(Z(e.$$.fragment,t),u=!0)},o(t){tt(e.$$.fragment,t),u=!1},d(t){lt(e,t),t&&y(l),t&&y(i),c=!1,r()}}}function Ct(e,n){let o,s,l,i,u,c,r,a,p,f,d,m,g,q,k,C,L,E,N,I,R,A,j,O=n[28]+1+"",D=t;function P(){n[12].call(m,n[27],n[28])}let V=n[28]<n[0].length-1&&$t(n),z=n[28]>0&&bt(n);function U(t,e){return t[4]!==t[28]?vt:xt}let F=U(n),H=F(n),J=!n[2]&&qt(n),Q=!n[2]&&Tt(n);return{key:e,first:null,c(){o=$("li"),s=$("div"),l=$("span"),i=b(O),u=b("."),c=x(),r=$("div"),a=$("label"),p=b("Title:"),d=x(),m=$("input"),q=x(),k=$("div"),V&&V.c(),C=x(),z&&z.c(),L=x(),H.c(),E=x(),J&&J.c(),N=x(),Q&&Q.c(),_(l,"class","number w-8 text-xl"),_(a,"class","label-inline svelte-9w4mm4"),_(a,"for",f="title-"+n[26].id),_(m,"id",g="title-"+n[26].id),_(m,"class","w-full px-4 svelte-9w4mm4"),_(m,"type","text"),_(r,"class","flex-auto relative"),_(k,"class","actions w-auto px-4 content-end text-right"),_(s,"class","w-full flex items-center py-2"),_(o,"class","svelte-9w4mm4"),this.first=o},m(t,e){w(t,o,e),h(o,s),h(s,l),h(l,i),h(l,u),h(s,c),h(s,r),h(r,a),h(a,p),h(r,d),h(r,m),S(m,n[26].title),h(s,q),h(s,k),V&&V.m(k,null),h(k,C),z&&z.m(k,null),h(k,L),H.m(k,null),h(o,E),J&&J.m(o,null),h(o,N),Q&&Q.m(o,null),R=!0,A||(j=v(m,"input",P),A=!0)},p(t,e){n=t,(!R||1&e)&&O!==(O=n[28]+1+"")&&T(i,O),(!R||1&e&&f!==(f="title-"+n[26].id))&&_(a,"for",f),(!R||1&e&&g!==(g="title-"+n[26].id))&&_(m,"id",g),1&e&&m.value!==n[26].title&&S(m,n[26].title),n[28]<n[0].length-1?V?V.p(n,e):(V=$t(n),V.c(),V.m(k,C)):V&&(V.d(1),V=null),n[28]>0?z?z.p(n,e):(z=bt(n),z.c(),z.m(k,L)):z&&(z.d(1),z=null),F===(F=U(n))&&H?H.p(n,e):(H.d(1),H=F(n),H&&(H.c(),H.m(k,null))),n[2]?J&&(W(),tt(J,1,1,(()=>{J=null})),X()):J?(J.p(n,e),4&e&&Z(J,1)):(J=qt(n),J.c(),Z(J,1),J.m(o,N)),n[2]?Q&&(W(),tt(Q,1,1,(()=>{Q=null})),X()):Q?(Q.p(n,e),4&e&&Z(Q,1)):(Q=Tt(n),Q.c(),Z(Q,1),Q.m(o,null))},r(){I=o.getBoundingClientRect()},f(){M(o),D()},a(){D(),D=B(o,I,gt,{duration:250})},i(t){R||(Z(J),Z(Q),R=!0)},o(t){tt(J),tt(Q),R=!1},d(t){t&&y(o),V&&V.d(),z&&z.d(),H.d(),J&&J.d(),Q&&Q.d(),A=!1,j()}}}function Lt(e){let n,o,s,l;return{c(){n=$("li"),o=$("button"),o.textContent="+ Add question",_(o,"class","w-full"),_(n,"class","add-question svelte-9w4mm4")},m(t,i){w(t,n,i),h(n,o),s||(l=v(o,"click",q(e[11])),s=!0)},p:t,d(t){t&&y(n),s=!1,l()}}}function Et(t){let e,n,o,s,l,i=[],u=new Map,r=t[0];const a=t=>t[26].id;for(let e=0;e<r.length;e+=1){let n=yt(t,r,e),o=a(n);u.set(o,i[e]=Ct(o,n))}let p=!t[2]&&Lt(t);return{c(){e=$("main"),n=$("ol");for(let t=0;t<i.length;t+=1)i[t].c();o=x(),p&&p.c(),_(n,"class",s=c(t[2]?"answers":"questions")+" svelte-9w4mm4"),L(n,"showLabels",t[1])},m(t,s){w(t,e,s),h(e,n);for(let t=0;t<i.length;t+=1)i[t].m(n,null);h(n,o),p&&p.m(n,null),l=!0},p(t,[e]){if(2047&e){r=t[0],W();for(let t=0;t<i.length;t+=1)i[t].r();i=function(t,e,n,o,s,l,i,u,c,r,a,p){let f=t.length,d=l.length,h=f;const m={};for(;h--;)m[t[h].key]=h;const g=[],w=new Map,y=new Map;for(h=d;h--;){const t=p(s,l,h),u=n(t);let c=i.get(u);c?o&&c.p(t,e):(c=r(u,t),c.c()),w.set(u,g[h]=c),u in m&&y.set(u,Math.abs(h-m[u]))}const $=new Set,b=new Set;function x(t){Z(t,1),t.m(u,a),i.set(t.key,t),a=t.first,d--}for(;f&&d;){const e=g[d-1],n=t[f-1],o=e.key,s=n.key;e===n?(a=e.first,f--,d--):w.has(s)?!i.has(o)||$.has(o)?x(e):b.has(s)?f--:y.get(o)>y.get(s)?(b.add(o),x(e)):($.add(s),f--):(c(n,i),f--)}for(;f--;){const e=t[f];w.has(e.key)||c(e,i)}for(;d;)x(g[d-1]);return g}(i,e,a,1,t,r,u,n,et,Ct,o,yt);for(let t=0;t<i.length;t+=1)i[t].a();X()}t[2]?p&&(p.d(1),p=null):p?p.p(t,e):(p=Lt(t),p.c(),p.m(n,null)),(!l||4&e&&s!==(s=c(t[2]?"answers":"questions")+" svelte-9w4mm4"))&&_(n,"class",s),6&e&&L(n,"showLabels",t[1])},i(t){if(!l){for(let t=0;t<r.length;t+=1)Z(i[t]);l=!0}},o(t){for(let t=0;t<i.length;t+=1)tt(i[t]);l=!1},d(t){t&&y(e);for(let t=0;t<i.length;t+=1)i[t].d();p&&p.d()}}}function Nt(t,e,n){let{questions:o=[]}=e,{parentType:s=null}=e,{customInputNames:l=!0}=e,{showLabels:i=!0}=e,u=-1;function c(t){n(4,u=t)}function r(t){o.splice(t,1),n(0,o),n(4,u=-1)}function a(t,e){n(0,o[t].type=e,o),n(0,o)}function p(t){const[e]=o.splice(t+1,1);o.splice(t,0,e),n(0,o)}function f(t){const[e]=o.splice(t,1);o.splice(t-1,0,e),n(0,o)}function d(t){Array.isArray(o[t].answers)||n(0,o[t].answers=[],o),o[t].answers.push({id:wt(),title:"Answer ",name:"",type:rt.TextValue}),n(0,o)}return t.$$set=t=>{"questions"in t&&n(0,o=t.questions),"parentType"in t&&n(2,s=t.parentType),"customInputNames"in t&&n(3,l=t.customInputNames),"showLabels"in t&&n(1,i=t.showLabels)},[o,i,s,l,u,c,r,a,p,f,d,function(){o.push({id:wt(),title:"New question",required:!0,type:rt.TextInput}),n(0,o)},function(t,e){t[e].title=this.value,n(0,o)},t=>p(t),t=>f(t),t=>c(t),t=>r(t),()=>c(-1),(t,e)=>a(t,e),function(t,e){t[e].required=this.checked,n(0,o)},function(t,e){t[e].name=this.value,n(0,o)},function(t,e){t[e].options=k(this.value),n(0,o)},function(e,s){t.$$.not_equal(s.answers,e)&&(s.answers=e,n(0,o))},function(e,s){t.$$.not_equal(s.type,e)&&(s.type=e,n(0,o))},function(t){i=t,n(1,i)},t=>d(t)]}class It extends ct{constructor(t){super(),ut(this,t,Nt,Et,u,{questions:0,parentType:2,customInputNames:3,showLabels:1})}}function Rt(t){let e,n,o,s,l,i;return{c(){e=$("div"),n=$("label"),o=b("Title:\n        "),s=$("input"),_(s,"type","text"),_(e,"class","my-4")},m(u,c){w(u,e,c),h(e,n),h(n,o),h(n,s),S(s,t[0].title),l||(i=v(s,"input",t[9]),l=!0)},p(t,e){1&e&&s.value!==t[0].title&&S(s,t[0].title)},d(t){t&&y(e),l=!1,i()}}}function Bt(e){let n,o,s,l;return{c(){n=$("div"),o=$("button"),o.textContent="Export",_(n,"class","my-4")},m(t,i){w(t,n,i),h(n,o),s||(l=v(o,"click",q(e[6])),s=!0)},p:t,d(t){t&&y(n),s=!1,l()}}}function Mt(t){let e,n,o,s,l,i=JSON.stringify(t[0],null,2)+"";return{c(){e=$("div"),n=$("h3"),n.textContent="Data model:",o=x(),s=$("pre"),l=b(i),_(e,"class","debug")},m(t,i){w(t,e,i),h(e,n),h(e,o),h(e,s),h(s,l)},p(t,e){1&e&&i!==(i=JSON.stringify(t[0],null,2)+"")&&T(l,i)},d(t){t&&y(e)}}}function At(t){let e,n,o,s,l,i,u,c,r,a,p,f,d,m,g,v,q=(t[0].title||"no name")+"",k=t[3]&&Rt(t),S=t[4]&&Bt(t);function C(e){t[10](e)}function L(e){t[11](e)}function E(e){t[12](e)}let N={};void 0!==t[0].questions&&(N.questions=t[0].questions),void 0!==t[1]&&(N.customInputNames=t[1]),void 0!==t[2]&&(N.showLabels=t[2]),p=new It({props:N}),O.push((()=>nt(p,"questions",C))),O.push((()=>nt(p,"customInputNames",L))),O.push((()=>nt(p,"showLabels",E)));let I=t[5]&&Mt(t);return{c(){e=$("main"),n=$("h1"),o=b('Survey builder "'),s=b(q),l=b('"'),i=x(),k&&k.c(),u=x(),S&&S.c(),c=x(),r=$("h3"),r.textContent="Questions:",a=x(),ot(p.$$.fragment),g=x(),I&&I.c(),_(n,"class","text-3xl"),_(e,"class","survey-builder container mx-auto font-sans")},m(t,f){w(t,e,f),h(e,n),h(n,o),h(n,s),h(n,l),h(e,i),k&&k.m(e,null),h(e,u),S&&S.m(e,null),h(e,c),h(e,r),h(e,a),st(p,e,null),h(e,g),I&&I.m(e,null),v=!0},p(t,[n]){(!v||1&n)&&q!==(q=(t[0].title||"no name")+"")&&T(s,q),t[3]?k?k.p(t,n):(k=Rt(t),k.c(),k.m(e,u)):k&&(k.d(1),k=null),t[4]?S?S.p(t,n):(S=Bt(t),S.c(),S.m(e,c)):S&&(S.d(1),S=null);const o={};!f&&1&n&&(f=!0,o.questions=t[0].questions,F((()=>f=!1))),!d&&2&n&&(d=!0,o.customInputNames=t[1],F((()=>d=!1))),!m&&4&n&&(m=!0,o.showLabels=t[2],F((()=>m=!1))),p.$set(o),t[5]?I?I.p(t,n):(I=Mt(t),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i(t){v||(Z(p.$$.fragment,t),v=!0)},o(t){tt(p.$$.fragment,t),v=!1},d(t){t&&y(e),k&&k.d(),S&&S.d(),lt(p),I&&I.d()}}}function jt(t,e,n){let{haveTitle:o=!0}=e,{customInputNames:s=!0}=e,{snapshot:l={}}=e,{onChange:i=(()=>{})}=e,{showExportButton:u=!0}=e,{onExport:c=(()=>{})}=e,{debug:r=!1}=e,{showLabels:a=!0}=e;return t.$$set=t=>{"haveTitle"in t&&n(3,o=t.haveTitle),"customInputNames"in t&&n(1,s=t.customInputNames),"snapshot"in t&&n(0,l=t.snapshot),"onChange"in t&&n(7,i=t.onChange),"showExportButton"in t&&n(4,u=t.showExportButton),"onExport"in t&&n(8,c=t.onExport),"debug"in t&&n(5,r=t.debug),"showLabels"in t&&n(2,a=t.showLabels)},t.$$.update=()=>{129&t.$$.dirty&&"function"==typeof i&&i(l)},[l,s,a,o,u,r,function(){"function"==typeof c?c(l):console.warn("onExport is not defined")},i,c,function(){l.title=this.value,n(0,l)},function(e){t.$$.not_equal(l.questions,e)&&(l.questions=e,n(0,l))},function(t){s=t,n(1,s)},function(t){a=t,n(2,a)}]}class Ot extends ct{constructor(t){super(),ut(this,t,jt,At,u,{haveTitle:3,customInputNames:1,snapshot:0,onChange:7,showExportButton:4,onExport:8,debug:5,showLabels:2})}}function Dt(t){let e,o,s,i,u,c,r,a,p,f,d,m,g,q,k,T,S,C,L,E,N,I,R,B,M,A;const j=[t[0]];let O={};for(let t=0;t<j.length;t+=1)O=n(O,j[t]);return R=new Ot({props:O}),{c(){e=$("main"),o=$("div"),s=$("label"),i=$("input"),u=b("\n      Have title?"),c=x(),r=$("label"),a=$("input"),p=b("\n      Show Export button?"),f=x(),d=$("label"),m=$("input"),g=b("\n      Custom input names"),q=x(),k=$("label"),T=$("input"),S=b("\n      Show labels"),C=x(),L=$("label"),E=$("input"),N=b("\n      Debug"),I=x(),ot(R.$$.fragment),_(i,"type","checkbox"),_(a,"type","checkbox"),_(m,"type","checkbox"),_(T,"type","checkbox"),_(E,"type","checkbox"),_(o,"class","border-2 my-4 px-8 py-4"),_(e,"class","container mx-auto")},m(n,l){w(n,e,l),h(e,o),h(o,s),h(s,i),i.checked=t[0].haveTitle,h(s,u),h(o,c),h(o,r),h(r,a),a.checked=t[0].showExportButton,h(r,p),h(o,f),h(o,d),h(d,m),m.checked=t[0].customInputNames,h(d,g),h(o,q),h(o,k),h(k,T),T.checked=t[0].showLabels,h(k,S),h(o,C),h(o,L),h(L,E),E.checked=t[0].debug,h(L,N),h(e,I),st(R,e,null),B=!0,M||(A=[v(i,"change",t[1]),v(a,"change",t[2]),v(m,"change",t[3]),v(T,"change",t[4]),v(E,"change",t[5])],M=!0)},p(t,[e]){1&e&&(i.checked=t[0].haveTitle),1&e&&(a.checked=t[0].showExportButton),1&e&&(m.checked=t[0].customInputNames),1&e&&(T.checked=t[0].showLabels),1&e&&(E.checked=t[0].debug);const n=1&e?function(t,e){const n={},o={},s={$$scope:1};let l=t.length;for(;l--;){const i=t[l],u=e[l];if(u){for(const t in i)t in u||(o[t]=1);for(const t in u)s[t]||(n[t]=u[t],s[t]=1);t[l]=u}else for(const t in i)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(j,[(o=t[0],"object"==typeof o&&null!==o?o:{})]):{};var o;R.$set(n)},i(t){B||(Z(R.$$.fragment,t),B=!0)},o(t){tt(R.$$.fragment,t),B=!1},d(t){t&&y(e),lt(R),M=!1,l(A)}}}function Pt(t,e,n){let{props:o={haveTitle:!1,customInputNames:!0,debug:!0,showExportButton:!0,showLabels:!0,snapshot:{title:"Sample survey",questions:[{id:wt("q"),title:"User name",name:"userName",type:rt.TextInput,required:!0},{id:wt("q"),title:"User rating",name:"userRating",type:rt.StarsRating,required:!0,options:5},{id:wt("q"),title:"Account type",name:"accountType",type:rt.SingleSelect,required:!0,answers:[{id:wt("a"),title:"Private account",type:rt.TextValue},{id:wt("a"),title:"Business account",type:rt.TextValue}]}]},onExport:t=>{console.log("Congrats: export",t)},onChange:t=>{console.log("Model changed",t)}}}=e;return t.$$set=t=>{"props"in t&&n(0,o=t.props)},[o,function(){o.haveTitle=this.checked,n(0,o)},function(){o.showExportButton=this.checked,n(0,o)},function(){o.customInputNames=this.checked,n(0,o)},function(){o.showLabels=this.checked,n(0,o)},function(){o.debug=this.checked,n(0,o)}]}window.SurveyBuilderInit=function(t){if(!t.target)throw new Error('Please define "target" element');return new Ot({target:t.target,props:t.props})};return new class extends ct{constructor(t){super(),ut(this,t,Pt,Dt,u,{props:0})}}({target:document.getElementById("svelte-app")})}();
