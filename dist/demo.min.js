var SurveyBuilder=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function i(){return Object.create(null)}function s(t){t.forEach(o)}function l(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t){return null==t?"":t}const c="undefined"!=typeof window;let a=c?()=>window.performance.now():()=>Date.now(),p=c?t=>requestAnimationFrame(t):t;const f=new Set;function d(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&p(d)}function h(t,e){t.appendChild(e)}function m(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function g(t){const e=x("style");return function(t,e){h(t.head||t,e)}(m(t),e),e}function y(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function w(){return v(" ")}function b(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t){return function(e){return e.preventDefault(),t.call(this,e)}}function q(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t){return""===t?null:+t}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function C(t,e){t.value=null==e?"":e}function S(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}const E=new Set;let N,I=0;function R(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),I-=i,I||p((()=>{I||(E.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),E.clear())})))}function B(n,o,i,s){if(!o)return t;const l=n.getBoundingClientRect();if(o.left===l.left&&o.right===l.right&&o.top===l.top&&o.bottom===l.bottom)return t;const{delay:u=0,duration:r=300,easing:c=e,start:h=a()+u,end:y=h+r,tick:$=t,css:x}=i(n,{from:o,to:l},s);let v,w=!0,b=!1;function _(){x&&R(n,v),w=!1}return function(t){let e;0===f.size&&p(d),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(!b&&t>=h&&(b=!0),b&&t>=y&&($(1,0),_()),!w)return!1;if(b){const e=0+1*c((t-h)/r);$(e,1-e)}return!0})),x&&(v=function(t,e,n,o,i,s,l,u=0){const r=16.666/o;let c="{\n";for(let t=0;t<=1;t+=r){const o=e+(n-e)*s(t);c+=100*t+`%{${l(o,1-o)}}\n`}const a=c+`100% {${l(n,1-n)}}\n}`,p=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${u}`,f=m(t);E.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=g(t).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[p]||(h[p]=!0,d.insertRule(`@keyframes ${p} ${a}`,d.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${p} ${o}ms linear ${i}ms 1 both`,I+=1,p}(n,0,1,r,u,c,x)),u||(b=!0),$(0,1),_}function M(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:o}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),i="none"===o.transform?"":o.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function z(t){N=t}const A=[],O=[],D=[],j=[],L=Promise.resolve();let P=!1;function V(t){D.push(t)}function U(t){j.push(t)}let F=!1;const H=new Set;function J(){if(!F){F=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];z(e),Q(e.$$)}for(z(null),A.length=0;O.length;)O.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];H.has(e)||(H.add(e),e())}D.length=0}while(A.length);for(;j.length;)j.pop()();P=!1,F=!1,H.clear()}}function Q(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}const Y=new Set;let G;function K(){G={r:0,c:[],p:G}}function W(){G.r||s(G.c),G=G.p}function X(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function Z(t,e,n,o){if(t&&t.o){if(Y.has(t))return;Y.add(t),G.c.push((()=>{Y.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function tt(t,e){t.f(),function(t,e){Z(t,1,1,(()=>{e.delete(t.key)}))}(t,e)}function et(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function nt(t){t&&t.c()}function ot(t,e,n,i){const{fragment:u,on_mount:r,on_destroy:c,after_update:a}=t.$$;u&&u.m(e,n),i||V((()=>{const e=r.map(o).filter(l);c?c.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(V)}function it(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){-1===t.$$.dirty[0]&&(A.push(t),P||(P=!0,L.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function lt(e,n,o,l,u,r,c,a=[-1]){const p=N;z(e);const f=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:u,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:i(),dirty:a,skip_bound:!1,root:n.target||p.$$.root};c&&c(f.root);let d=!1;if(f.ctx=o?o(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&u(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),d&&st(e,t)),n})):[],f.update(),d=!0,s(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach($)}else f.fragment&&f.fragment.c();n.intro&&X(e.$$.fragment),ot(e,n.target,n.anchor,n.customElement),J()}z(p)}class ut{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var rt;function ct(t,e,n){const o=t.slice();return o[6]=e[n][0],o[7]=e[n][1],o}function at(e){let n,o,i,s=e[7]+"";return{c(){n=x("option"),o=v(s),n.__value=i=e[6],n.value=n.__value},m(t,e){y(t,n,e),h(n,o)},p:t,d(t){t&&$(n)}}}function pt(e){let n,o,i,l,u,r,c,a,p,f,d,m,g=e[2],k=[];for(let t=0;t<g.length;t+=1)k[t]=at(ct(e,g,t));return{c(){n=x("main"),o=x("div"),i=x("label"),l=v("Type:"),r=w(),c=x("select");for(let t=0;t<k.length;t+=1)k[t].c();p=w(),f=x("div"),f.innerHTML='<svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>',q(i,"for",u="qtype-"+e[1]),q(i,"class","absolute inset-y-3 left-2 hidden lg:block uppercase tracking-wide text-gray-400 text-xs font-bold"),q(c,"id",a="qtype-"+e[1]),q(c,"class","dropdown svelte-1cnreoq"),void 0===e[0]&&V((()=>e[5].call(c))),q(f,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"),q(o,"class","relative")},m(t,s){y(t,n,s),h(n,o),h(o,i),h(i,l),h(o,r),h(o,c);for(let t=0;t<k.length;t+=1)k[t].m(c,null);S(c,e[0]),h(o,p),h(o,f),d||(m=[b(c,"change",e[5]),b(c,"input",_(e[3]))],d=!0)},p(t,[e]){if(2&e&&u!==(u="qtype-"+t[1])&&q(i,"for",u),4&e){let n;for(g=t[2],n=0;n<g.length;n+=1){const o=ct(t,g,n);k[n]?k[n].p(o,e):(k[n]=at(o),k[n].c(),k[n].m(c,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=g.length}2&e&&a!==(a="qtype-"+t[1])&&q(c,"id",a),5&e&&S(c,t[0])},i:t,o:t,d(t){t&&$(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(k,t),d=!1,s(m)}}}function ft(t,e,n){let{questionType:o}=e,{id:i="qt"}=e;const s=[[rt.TextInput,"User input"],[rt.SingleSelect,"Single option"],[rt.MultipleSelect,"Multiple options"],[rt.StarsRating,"Rating"]];let{onChange:l}=e;return t.$$set=t=>{"questionType"in t&&n(0,o=t.questionType),"id"in t&&n(1,i=t.id),"onChange"in t&&n(4,l=t.onChange)},[o,i,s,t=>l(t.target.value),l,function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,o),n(2,s)}]}!function(t){t.TextInput="input",t.TextValue="text",t.SingleSelect="single",t.MultipleSelect="multiple",t.StarsRating="rating"}(rt||(rt={}));class dt extends ut{constructor(t){super(),lt(this,t,ft,pt,u,{questionType:0,id:1,onChange:4})}}function ht(t){const e=t-1;return e*e*e+1}function mt(t,{from:e,to:n},o={}){const i=getComputedStyle(t),s="none"===i.transform?"":i.transform,[u,r]=i.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*u/n.width-(n.left+u),a=e.top+e.height*r/n.height-(n.top+r),{delay:p=0,duration:f=(t=>120*Math.sqrt(t)),easing:d=ht}=o;return{delay:p,duration:l(f)?f(Math.sqrt(c*c+a*a)):f,easing:d,css:(t,o)=>{const i=o*c,l=o*a,u=t+o*e.width/n.width,r=t+o*e.height/n.height;return`transform: ${s} translate(${i}px, ${l}px) scale(${u}, ${r});`}}}const gt=(t="q")=>`${t}-${Math.random().toString(32).substr(2)}`;function yt(t,e,n){const o=t.slice();return o[24]=e[n],o[25]=e,o[26]=n,o}function $t(t){let e,n,o;function i(){return t[12](t[26])}return{c(){e=x("button"),e.textContent="↓"},m(t,s){y(t,e,s),n||(o=b(e,"click",_(i)),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,o()}}}function xt(t){let e,n,o;function i(){return t[13](t[26])}return{c(){e=x("button"),e.textContent="↑"},m(t,s){y(t,e,s),n||(o=b(e,"click",_(i)),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,o()}}}function vt(t){let e,n,o,i,l;function u(){return t[15](t[26])}return{c(){e=x("button"),e.textContent="× Yes, delete",n=w(),o=x("button"),o.textContent="Cancel",q(e,"class","danger"),q(o,"class","warning")},m(s,r){y(s,e,r),y(s,n,r),y(s,o,r),i||(l=[b(e,"click",_(u)),b(o,"click",_(t[16]))],i=!0)},p(e,n){t=e},d(t){t&&$(e),t&&$(n),t&&$(o),i=!1,s(l)}}}function wt(t){let e,n,o;function i(){return t[14](t[26])}return{c(){e=x("button"),e.textContent="× Delete",q(e,"class","warning")},m(t,s){y(t,e,s),n||(o=b(e,"click",_(i)),n=!0)},p(e,n){t=e},d(t){t&&$(e),n=!1,o()}}}function bt(t){let e,n,o,i,s,l,u,r,c,a,p;function f(...e){return t[17](t[26],...e)}function d(){t[18].call(s,t[25],t[26])}n=new dt({props:{id:t[24].id,questionType:t[24].type,onChange:f}});let m=t[2]&&_t(t),g=t[24].type===rt.StarsRating&&qt(t);return{c(){e=x("div"),nt(n.$$.fragment),o=w(),i=x("label"),s=x("input"),l=v("\n            Required"),u=w(),m&&m.c(),r=w(),g&&g.c(),q(s,"type","checkbox"),q(i,"class","mx-4 whitespace-nowrap"),q(e,"class","flex w-3/4 items-center ml-8 py-2")},m(f,$){y(f,e,$),ot(n,e,null),h(e,o),h(e,i),h(i,s),s.checked=t[24].required,h(i,l),h(e,u),m&&m.m(e,null),h(e,r),g&&g.m(e,null),c=!0,a||(p=b(s,"change",d),a=!0)},p(o,i){t=o;const l={};1&i&&(l.id=t[24].id),1&i&&(l.questionType=t[24].type),1&i&&(l.onChange=f),n.$set(l),1&i&&(s.checked=t[24].required),t[2]?m?m.p(t,i):(m=_t(t),m.c(),m.m(e,r)):m&&(m.d(1),m=null),t[24].type===rt.StarsRating?g?g.p(t,i):(g=qt(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(t){c||(X(n.$$.fragment,t),c=!0)},o(t){Z(n.$$.fragment,t),c=!1},d(t){t&&$(e),it(n),m&&m.d(),g&&g.d(),a=!1,p()}}}function _t(t){let e,n,o,i,s,l,u,r,c;function a(){t[19].call(l,t[25],t[26])}return{c(){e=x("div"),n=x("label"),o=v("Name:"),s=w(),l=x("input"),q(n,"class","label-inline svelte-r3h0zx"),q(n,"for",i="name-"+t[24].id),q(l,"id",u="name-"+t[24].id),q(l,"class","w-40 lg:w-64 px-4 svelte-r3h0zx"),q(l,"type","text"),q(l,"placeholder","inputName"),q(e,"class","flex-auto relative mr-4")},m(i,u){y(i,e,u),h(e,n),h(n,o),h(e,s),h(e,l),C(l,t[24].name),r||(c=b(l,"input",a),r=!0)},p(e,o){t=e,1&o&&i!==(i="name-"+t[24].id)&&q(n,"for",i),1&o&&u!==(u="name-"+t[24].id)&&q(l,"id",u),1&o&&l.value!==t[24].name&&C(l,t[24].name)},d(t){t&&$(e),r=!1,c()}}}function qt(t){let e,n,o,i,s,l,u,r,c;function a(){t[20].call(l,t[25],t[26])}return{c(){e=x("div"),n=x("label"),o=v("Max:"),s=w(),l=x("input"),q(n,"class","label-inline svelte-r3h0zx"),q(n,"for",i="opts-"+t[24].id),q(l,"id",u="opts-"+t[24].id),q(l,"class","w-24 lg:w-32 svelte-r3h0zx"),q(l,"type","number"),q(l,"placeholder","5"),q(e,"class","relative flex-auto")},m(i,u){y(i,e,u),h(e,n),h(n,o),h(e,s),h(e,l),C(l,t[24].options),r||(c=b(l,"input",a),r=!0)},p(e,o){t=e,1&o&&i!==(i="opts-"+t[24].id)&&q(n,"for",i),1&o&&u!==(u="opts-"+t[24].id)&&q(l,"id",u),1&o&&k(l.value)!==t[24].options&&C(l,t[24].options)},d(t){t&&$(e),r=!1,c()}}}function kt(t){let e,n,o=t[24].type!==rt.StarsRating&&t[24].type!==rt.TextInput&&Tt(t);return{c(){e=x("div"),o&&o.c(),q(e,"class","ml-8 w-3/4")},m(t,i){y(t,e,i),o&&o.m(e,null),n=!0},p(t,n){t[24].type!==rt.StarsRating&&t[24].type!==rt.TextInput?o?(o.p(t,n),1&n&&X(o,1)):(o=Tt(t),o.c(),X(o,1),o.m(e,null)):o&&(K(),Z(o,1,1,(()=>{o=null})),W())},i(t){n||(X(o),n=!0)},o(t){Z(o),n=!1},d(t){t&&$(e),o&&o.d()}}}function Tt(t){let e,n,o,i,s,l,u,r;function c(e){t[21](e,t[24])}function a(e){t[22](e,t[24])}let p={};function f(){return t[23](t[26])}return void 0!==t[24].answers&&(p.questions=t[24].answers),void 0!==t[24].type&&(p.parentType=t[24].type),e=new It({props:p}),O.push((()=>et(e,"questions",c))),O.push((()=>et(e,"parentType",a))),{c(){nt(e.$$.fragment),i=w(),s=x("button"),s.textContent="+ Answer",q(s,"class","secondary w-full")},m(t,n){ot(e,t,n),y(t,i,n),y(t,s,n),l=!0,u||(r=b(s,"click",_(f)),u=!0)},p(i,s){t=i;const l={};!n&&1&s&&(n=!0,l.questions=t[24].answers,U((()=>n=!1))),!o&&1&s&&(o=!0,l.parentType=t[24].type,U((()=>o=!1))),e.$set(l)},i(t){l||(X(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){it(e,t),t&&$(i),t&&$(s),u=!1,r()}}}function Ct(e,n){let o,i,s,l,u,r,c,a,p,f,d,m,g,_,k,S,E,N,I,R,z,A,O,D=n[26]+1+"",j=t;function L(){n[11].call(m,n[25],n[26])}let P=n[26]<n[0].length-1&&$t(n),V=n[26]>0&&xt(n);function U(t,e){return t[3]!==t[26]?wt:vt}let F=U(n),H=F(n),J=!n[1]&&bt(n),Q=!n[1]&&kt(n);return{key:e,first:null,c(){o=x("li"),i=x("div"),s=x("span"),l=v(D),u=v("."),r=w(),c=x("div"),a=x("label"),p=v("Title:"),d=w(),m=x("input"),_=w(),k=x("div"),P&&P.c(),S=w(),V&&V.c(),E=w(),H.c(),N=w(),J&&J.c(),I=w(),Q&&Q.c(),q(s,"class","number w-8 text-xl"),q(a,"class","label-inline svelte-r3h0zx"),q(a,"for",f="title-"+n[24].id),q(m,"id",g="title-"+n[24].id),q(m,"class","w-full px-4 svelte-r3h0zx"),q(m,"type","text"),q(c,"class","flex-auto relative"),q(k,"class","actions w-auto px-4 content-end text-right"),q(i,"class","w-full flex items-center py-2"),q(o,"class","svelte-r3h0zx"),this.first=o},m(t,e){y(t,o,e),h(o,i),h(i,s),h(s,l),h(s,u),h(i,r),h(i,c),h(c,a),h(a,p),h(c,d),h(c,m),C(m,n[24].title),h(i,_),h(i,k),P&&P.m(k,null),h(k,S),V&&V.m(k,null),h(k,E),H.m(k,null),h(o,N),J&&J.m(o,null),h(o,I),Q&&Q.m(o,null),z=!0,A||(O=b(m,"input",L),A=!0)},p(t,e){n=t,(!z||1&e)&&D!==(D=n[26]+1+"")&&T(l,D),(!z||1&e&&f!==(f="title-"+n[24].id))&&q(a,"for",f),(!z||1&e&&g!==(g="title-"+n[24].id))&&q(m,"id",g),1&e&&m.value!==n[24].title&&C(m,n[24].title),n[26]<n[0].length-1?P?P.p(n,e):(P=$t(n),P.c(),P.m(k,S)):P&&(P.d(1),P=null),n[26]>0?V?V.p(n,e):(V=xt(n),V.c(),V.m(k,E)):V&&(V.d(1),V=null),F===(F=U(n))&&H?H.p(n,e):(H.d(1),H=F(n),H&&(H.c(),H.m(k,null))),n[1]?J&&(K(),Z(J,1,1,(()=>{J=null})),W()):J?(J.p(n,e),2&e&&X(J,1)):(J=bt(n),J.c(),X(J,1),J.m(o,I)),n[1]?Q&&(K(),Z(Q,1,1,(()=>{Q=null})),W()):Q?(Q.p(n,e),2&e&&X(Q,1)):(Q=kt(n),Q.c(),X(Q,1),Q.m(o,null))},r(){R=o.getBoundingClientRect()},f(){M(o),j()},a(){j(),j=B(o,R,mt,{duration:250})},i(t){z||(X(J),X(Q),z=!0)},o(t){Z(J),Z(Q),z=!1},d(t){t&&$(o),P&&P.d(),V&&V.d(),H.d(),J&&J.d(),Q&&Q.d(),A=!1,O()}}}function St(e){let n,o,i,s;return{c(){n=x("li"),o=x("button"),o.textContent="+ Add question",q(o,"class","w-full"),q(n,"class","add-question svelte-r3h0zx")},m(t,l){y(t,n,l),h(n,o),i||(s=b(o,"click",_(e[10])),i=!0)},p:t,d(t){t&&$(n),i=!1,s()}}}function Et(t){let e,n,o,i,s,l=[],u=new Map,c=t[0];const a=t=>t[24].id;for(let e=0;e<c.length;e+=1){let n=yt(t,c,e),o=a(n);u.set(o,l[e]=Ct(o,n))}let p=!t[1]&&St(t);return{c(){e=x("main"),n=x("ol");for(let t=0;t<l.length;t+=1)l[t].c();o=w(),p&&p.c(),q(n,"class",i=r(t[1]?"answers":"questions")+" svelte-r3h0zx")},m(t,i){y(t,e,i),h(e,n);for(let t=0;t<l.length;t+=1)l[t].m(n,null);h(n,o),p&&p.m(n,null),s=!0},p(t,[e]){if(1023&e){c=t[0],K();for(let t=0;t<l.length;t+=1)l[t].r();l=function(t,e,n,o,i,s,l,u,r,c,a,p){let f=t.length,d=s.length,h=f;const m={};for(;h--;)m[t[h].key]=h;const g=[],y=new Map,$=new Map;for(h=d;h--;){const t=p(i,s,h),u=n(t);let r=l.get(u);r?o&&r.p(t,e):(r=c(u,t),r.c()),y.set(u,g[h]=r),u in m&&$.set(u,Math.abs(h-m[u]))}const x=new Set,v=new Set;function w(t){X(t,1),t.m(u,a),l.set(t.key,t),a=t.first,d--}for(;f&&d;){const e=g[d-1],n=t[f-1],o=e.key,i=n.key;e===n?(a=e.first,f--,d--):y.has(i)?!l.has(o)||x.has(o)?w(e):v.has(i)?f--:$.get(o)>$.get(i)?(v.add(o),w(e)):(x.add(i),f--):(r(n,l),f--)}for(;f--;){const e=t[f];y.has(e.key)||r(e,l)}for(;d;)w(g[d-1]);return g}(l,e,a,1,t,c,u,n,tt,Ct,o,yt);for(let t=0;t<l.length;t+=1)l[t].a();W()}t[1]?p&&(p.d(1),p=null):p?p.p(t,e):(p=St(t),p.c(),p.m(n,null)),(!s||2&e&&i!==(i=r(t[1]?"answers":"questions")+" svelte-r3h0zx"))&&q(n,"class",i)},i(t){if(!s){for(let t=0;t<c.length;t+=1)X(l[t]);s=!0}},o(t){for(let t=0;t<l.length;t+=1)Z(l[t]);s=!1},d(t){t&&$(e);for(let t=0;t<l.length;t+=1)l[t].d();p&&p.d()}}}function Nt(t,e,n){let{questions:o=[]}=e,{parentType:i=null}=e,{customInputNames:s=!0}=e,l=-1;function u(t){n(3,l=t)}function r(t){o.splice(t,1),n(0,o),n(3,l=-1)}function c(t,e){n(0,o[t].type=e,o),n(0,o)}function a(t){const[e]=o.splice(t+1,1);o.splice(t,0,e),n(0,o)}function p(t){const[e]=o.splice(t,1);o.splice(t-1,0,e),n(0,o)}function f(t){Array.isArray(o[t].answers)||n(0,o[t].answers=[],o),o[t].answers.push({id:gt(),title:"Answer ",name:"",type:rt.TextValue}),n(0,o)}return t.$$set=t=>{"questions"in t&&n(0,o=t.questions),"parentType"in t&&n(1,i=t.parentType),"customInputNames"in t&&n(2,s=t.customInputNames)},[o,i,s,l,u,r,c,a,p,f,function(){o.push({id:gt(),title:"New question",required:!0,type:rt.TextInput}),n(0,o)},function(t,e){t[e].title=this.value,n(0,o)},t=>a(t),t=>p(t),t=>u(t),t=>r(t),()=>u(-1),(t,e)=>c(t,e),function(t,e){t[e].required=this.checked,n(0,o)},function(t,e){t[e].name=this.value,n(0,o)},function(t,e){t[e].options=k(this.value),n(0,o)},function(e,i){t.$$.not_equal(i.answers,e)&&(i.answers=e,n(0,o))},function(e,i){t.$$.not_equal(i.type,e)&&(i.type=e,n(0,o))},t=>f(t)]}class It extends ut{constructor(t){super(),lt(this,t,Nt,Et,u,{questions:0,parentType:1,customInputNames:2})}}function Rt(t){let e,n,o,i,s,l;return{c(){e=x("div"),n=x("label"),o=v("Title:\n        "),i=x("input"),q(i,"type","text"),q(e,"class","my-4")},m(u,r){y(u,e,r),h(e,n),h(n,o),h(n,i),C(i,t[0].title),s||(l=b(i,"input",t[8]),s=!0)},p(t,e){1&e&&i.value!==t[0].title&&C(i,t[0].title)},d(t){t&&$(e),s=!1,l()}}}function Bt(e){let n,o,i,s;return{c(){n=x("div"),o=x("button"),o.textContent="Export",q(n,"class","my-4")},m(t,l){y(t,n,l),h(n,o),i||(s=b(o,"click",_(e[5])),i=!0)},p:t,d(t){t&&$(n),i=!1,s()}}}function Mt(t){let e,n,o,i,s,l=JSON.stringify(t[0],null,2)+"";return{c(){e=x("div"),n=x("h3"),n.textContent="Data model:",o=w(),i=x("pre"),s=v(l),q(e,"class","debug")},m(t,l){y(t,e,l),h(e,n),h(e,o),h(e,i),h(i,s)},p(t,e){1&e&&l!==(l=JSON.stringify(t[0],null,2)+"")&&T(s,l)},d(t){t&&$(e)}}}function zt(t){let e,n,o,i,s,l,u,r,c,a,p,f,d,m,g,b=(t[0].title||"no name")+"",_=t[2]&&Rt(t),k=t[3]&&Bt(t);function C(e){t[9](e)}function S(e){t[10](e)}let E={};void 0!==t[0].questions&&(E.questions=t[0].questions),void 0!==t[1]&&(E.customInputNames=t[1]),p=new It({props:E}),O.push((()=>et(p,"questions",C))),O.push((()=>et(p,"customInputNames",S)));let N=t[4]&&Mt(t);return{c(){e=x("main"),n=x("h1"),o=v('Survey builder "'),i=v(b),s=v('"'),l=w(),_&&_.c(),u=w(),k&&k.c(),r=w(),c=x("h3"),c.textContent="Questions:",a=w(),nt(p.$$.fragment),m=w(),N&&N.c(),q(n,"class","text-3xl"),q(e,"class","survey-builder container mx-auto font-sans")},m(t,f){y(t,e,f),h(e,n),h(n,o),h(n,i),h(n,s),h(e,l),_&&_.m(e,null),h(e,u),k&&k.m(e,null),h(e,r),h(e,c),h(e,a),ot(p,e,null),h(e,m),N&&N.m(e,null),g=!0},p(t,[n]){(!g||1&n)&&b!==(b=(t[0].title||"no name")+"")&&T(i,b),t[2]?_?_.p(t,n):(_=Rt(t),_.c(),_.m(e,u)):_&&(_.d(1),_=null),t[3]?k?k.p(t,n):(k=Bt(t),k.c(),k.m(e,r)):k&&(k.d(1),k=null);const o={};!f&&1&n&&(f=!0,o.questions=t[0].questions,U((()=>f=!1))),!d&&2&n&&(d=!0,o.customInputNames=t[1],U((()=>d=!1))),p.$set(o),t[4]?N?N.p(t,n):(N=Mt(t),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(t){g||(X(p.$$.fragment,t),g=!0)},o(t){Z(p.$$.fragment,t),g=!1},d(t){t&&$(e),_&&_.d(),k&&k.d(),it(p),N&&N.d()}}}function At(t,e,n){let{haveTitle:o=!0}=e,{customInputNames:i=!0}=e,{snapshot:s={}}=e,{onChange:l=(()=>{})}=e,{showExportButton:u=!0}=e,{onExport:r=(()=>{})}=e,{debug:c=!1}=e;return t.$$set=t=>{"haveTitle"in t&&n(2,o=t.haveTitle),"customInputNames"in t&&n(1,i=t.customInputNames),"snapshot"in t&&n(0,s=t.snapshot),"onChange"in t&&n(6,l=t.onChange),"showExportButton"in t&&n(3,u=t.showExportButton),"onExport"in t&&n(7,r=t.onExport),"debug"in t&&n(4,c=t.debug)},t.$$.update=()=>{65&t.$$.dirty&&"function"==typeof l&&l(s)},[s,i,o,u,c,function(){"function"==typeof r?r(s):console.warn("onExport is not defined")},l,r,function(){s.title=this.value,n(0,s)},function(e){t.$$.not_equal(s.questions,e)&&(s.questions=e,n(0,s))},function(t){i=t,n(1,i)}]}class Ot extends ut{constructor(t){super(),lt(this,t,At,zt,u,{haveTitle:2,customInputNames:1,snapshot:0,onChange:6,showExportButton:3,onExport:7,debug:4})}}function Dt(t){let e,o,i,l,u,r,c,a,p,f,d,m,g,_,k,T,C,S,E,N,I,R;const B=[t[0]];let M={};for(let t=0;t<B.length;t+=1)M=n(M,B[t]);return E=new Ot({props:M}),{c(){e=x("main"),o=x("div"),i=x("label"),l=x("input"),u=v("\n      Have title?"),r=w(),c=x("label"),a=x("input"),p=v("\n      Show Export button?"),f=w(),d=x("label"),m=x("input"),g=v("\n      Custom input names"),_=w(),k=x("label"),T=x("input"),C=v("\n      Debug"),S=w(),nt(E.$$.fragment),q(l,"type","checkbox"),q(a,"type","checkbox"),q(m,"type","checkbox"),q(T,"type","checkbox"),q(o,"class","border-2 my-4 px-8 py-4"),q(e,"class","container mx-auto")},m(n,s){y(n,e,s),h(e,o),h(o,i),h(i,l),l.checked=t[0].haveTitle,h(i,u),h(o,r),h(o,c),h(c,a),a.checked=t[0].showExportButton,h(c,p),h(o,f),h(o,d),h(d,m),m.checked=t[0].customInputNames,h(d,g),h(o,_),h(o,k),h(k,T),T.checked=t[0].debug,h(k,C),h(e,S),ot(E,e,null),N=!0,I||(R=[b(l,"change",t[1]),b(a,"change",t[2]),b(m,"change",t[3]),b(T,"change",t[4])],I=!0)},p(t,[e]){1&e&&(l.checked=t[0].haveTitle),1&e&&(a.checked=t[0].showExportButton),1&e&&(m.checked=t[0].customInputNames),1&e&&(T.checked=t[0].debug);const n=1&e?function(t,e){const n={},o={},i={$$scope:1};let s=t.length;for(;s--;){const l=t[s],u=e[s];if(u){for(const t in l)t in u||(o[t]=1);for(const t in u)i[t]||(n[t]=u[t],i[t]=1);t[s]=u}else for(const t in l)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(B,[(o=t[0],"object"==typeof o&&null!==o?o:{})]):{};var o;E.$set(n)},i(t){N||(X(E.$$.fragment,t),N=!0)},o(t){Z(E.$$.fragment,t),N=!1},d(t){t&&$(e),it(E),I=!1,s(R)}}}function jt(t,e,n){let{props:o={haveTitle:!1,customInputNames:!0,debug:!0,showExportButton:!0,snapshot:{title:"Sample survey",questions:[{id:gt("q"),title:"User name",name:"userName",type:rt.TextInput,required:!0},{id:gt("q"),title:"User rating",name:"userRating",type:rt.StarsRating,required:!0,options:5},{id:gt("q"),title:"Account type",name:"accountType",type:rt.SingleSelect,required:!0,answers:[{id:gt("a"),title:"Private account",type:rt.TextValue},{id:gt("a"),title:"Business account",type:rt.TextValue}]}]},onExport:t=>{console.log("Congrats: export",t)},onChange:t=>{console.log("Model changed",t)}}}=e;return t.$$set=t=>{"props"in t&&n(0,o=t.props)},[o,function(){o.haveTitle=this.checked,n(0,o)},function(){o.showExportButton=this.checked,n(0,o)},function(){o.customInputNames=this.checked,n(0,o)},function(){o.debug=this.checked,n(0,o)}]}window.SurveyBuilderInit=function(t){if(!t.target)throw new Error('Please define "target" element');return new Ot({target:t.target,props:t.props})};return new class extends ut{constructor(t){super(),lt(this,t,jt,Dt,u,{props:0})}}({target:document.getElementById("svelte-app")})}();
